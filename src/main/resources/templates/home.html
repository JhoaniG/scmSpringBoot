<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCM - Cuidamos a tu mascota</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link th:href="@{/css/stilos.css}" rel="stylesheet">

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; }

        /* --- NAVBAR --- */
        .navbar-custom { background-color: white; box-shadow: 0 2px 15px rgba(0,0,0,0.05); padding: 1rem 0; }
        .logo h1 { color: #0d6efd; font-weight: 800; margin: 0; letter-spacing: -1px; }
        .nav-link-custom { color: #555; font-weight: 600; transition: color 0.3s; margin: 0 15px; text-decoration: none; }
        .nav-link-custom:hover { color: #0d6efd; }

        /* --- CARRUSEL (HERO) --- */
        .carousel-item { height: 85vh; min-height: 500px; background-color: #000; }
        .carousel-item img {
            height: 100%; object-fit: cover; opacity: 0.7; /* Oscurecer para que el texto resalte */
        }
        .carousel-caption { bottom: 20%; }
        .hero-title { font-size: 3.5rem; font-weight: 800; text-shadow: 2px 2px 10px rgba(0,0,0,0.5); }

        /* --- SECCIONES --- */
        .section-padding { padding: 5rem 0; }
        .section-title { text-align: center; margin-bottom: 3rem; }
        .section-title h4 { color: #0dcaf0; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; font-size: 1rem; }
        .section-title h2 { color: #333; font-weight: 800; font-size: 2.5rem; }

        /* --- TARJETAS DE VETERINARIOS --- */
        .vet-card {
            background: white; border: none; border-radius: 20px; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); transition: all 0.3s ease; height: 100%;
            position: relative; margin-top: 30px; /* Espacio para la foto flotante */
        }
        .vet-card:hover { transform: translateY(-10px); box-shadow: 0 15px 40px rgba(13, 110, 253, 0.15); }

        .vet-header-bg {
            height: 100px; background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
        }

        .vet-avatar-container {
            position: absolute; top: 30px; left: 50%; transform: translateX(-50%);
            width: 140px; height: 140px;
            border-radius: 50%; border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); overflow: hidden; background: white;
        }
        .vet-img { width: 100%; height: 100%; object-fit: cover; }
        .vet-icon-default { font-size: 4rem; color: #dee2e6; line-height: 130px; }

        .vet-body { padding: 5rem 1.5rem 2rem 1.5rem; text-align: center; }
        .vet-name { font-weight: 700; color: #333; font-size: 1.25rem; margin-bottom: 5px; }
        .vet-specialty { color: #0dcaf0; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; }
        .vet-clinic { color: #777; font-size: 0.9rem; margin-top: 10px; margin-bottom: 20px; }

        /* --- MENSAJE DE RECLUTAMIENTO --- */
        .recruitment-box {
            background: #e7f1ff; border-left: 5px solid #0d6efd;
            padding: 1.5rem; border-radius: 10px; margin-bottom: 3rem;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
        }
        .recruitment-text { color: #084298; font-weight: 500; margin: 0; font-size: 1.1rem; }

        /* --- TARJETAS DE MASCOTAS (Promo) --- */
        .promo-card { border: none; background: transparent; margin-bottom: 2rem; }
        .promo-img { border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: transform 0.3s; }
        .promo-card:hover .promo-img { transform: scale(1.02); }

        /* --- CONTACTO --- */
        .contact-form { background: white; padding: 3rem; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.05); }
        .form-control-lg { border-radius: 10px; font-size: 0.95rem; background-color: #f8f9fa; border: 1px solid #eee; }
        .form-control-lg:focus { background-color: white; box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15); border-color: #0d6efd; }

        /* Botones */
        .btn-primary-gradient {
            background: linear-gradient(45deg, #0d6efd, #0099ff); border: none;
            color: white; padding: 12px 30px; border-radius: 50px; font-weight: 600;
            transition: all 0.3s;
        }
        .btn-primary-gradient:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(13, 110, 253, 0.4); color: white; }

        .footer { background-color: #212529; color: #adb5bd; padding-top: 4rem; padding-bottom: 2rem; }
        .footer a { color: #adb5bd; text-decoration: none; transition: 0.2s; }
        .footer a:hover { color: white; }
    </style>
</head>

<body>

<header class="header sticky-top navbar-custom">
    <div class="container d-flex justify-content-between align-items-center">
        <div class="logo d-flex align-items-center gap-2">
            <i class="fas fa-paw fa-2x text-primary"></i>
            <h1>SCM</h1>
        </div>
        <nav class="d-none d-lg-flex align-items-center">
            <a href="#seccion1" class="nav-link-custom">Profesionales</a>
            <a href="#seccion2" class="nav-link-custom">Casos de Éxito</a>
            <a href="#seccion3" class="nav-link-custom">Contáctanos</a>

            <div th:if="${session.usuarioLogueado == null}" class="ms-3">
                <button type="button" class="btn btn-outline-primary rounded-pill px-4 me-2 fw-bold"
                        data-bs-toggle="modal" data-bs-target="#modalRegistro">Crear Cuenta</button>
                <a th:href="@{/login}" class="btn btn-primary-gradient px-4">Iniciar Sesión</a>
            </div>

            <div th:if="${session.usuarioLogueado != null}" class="d-flex align-items-center ms-3">
                <span class="me-3 fw-bold text-dark">Hola, <span th:text="${session.usuarioLogueado.nombre}">User</span></span>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="btn btn-danger btn-sm rounded-pill px-3">Salir</button>
                </form>
            </div>
        </nav>

        <button class="btn btn-link d-lg-none text-dark"><i class="fas fa-bars fa-lg"></i></button>
    </div>
</header>

<div class="capa">
    <div id="carouselHero" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img th:src="@{/Imagenes/img1.jpg}" class="d-block w-100" alt="Cuidado Veterinario">
                <div class="carousel-caption d-none d-md-block">
                    <h2 class="hero-title">Salud y Bienestar</h2>
                    <p class="fs-4">Tecnología y amor para el cuidado de tu mejor amigo.</p>
                    <button class="btn btn-primary-gradient btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#modalRegistro">Únete Ahora</button>
                </div>
            </div>
            <div class="carousel-item">
                <img th:src="@{/Imagenes/img2.jpg}" class="d-block w-100" alt="Veterinarios Expertos">
                <div class="carousel-caption d-none d-md-block">
                    <h2 class="hero-title">Expertos a tu Servicio</h2>
                    <p class="fs-4">Los mejores profesionales listos para atenderte.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img th:src="@{/Imagenes/img3.jpg}" class="d-block w-100" alt="Mascotas Felices">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselHero" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselHero" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</div>

<div class="container mt-4 position-relative" style="z-index: 10;">
    <div th:if="${success}" class="alert alert-success alert-dismissible fade show shadow" role="alert">
        <i class="fas fa-check-circle me-2"></i><strong th:text="${success}"></strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show shadow" role="alert">
        <i class="fas fa-exclamation-circle me-2"></i><strong th:text="${error}"></strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
</div>

<section class="section-padding bg-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="section-title text-start mb-4">
                    <h4>Sobre SCM</h4>
                    <h2>Pasión por la salud animal</h2>
                </div>
                <p class="lead text-muted">Somos la plataforma líder que conecta a dueños responsables con los mejores especialistas veterinarios.</p>
                <p class="text-muted">Nuestra misión es facilitar el seguimiento médico, dietas y actividades para garantizar una vida larga y feliz para tus mascotas.</p>

                <div class="row mt-4">
                    <div class="col-sm-6 mb-3">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-check-circle text-primary fa-2x me-3"></i>
                            <span class="fw-bold">Atención 24/7</span>
                        </div>
                    </div>
                    <div class="col-sm-6 mb-3">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-user-md text-primary fa-2x me-3"></i>
                            <span class="fw-bold">Especialistas Certificados</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 position-relative">
                <img th:src="@{/Imagenes/perrotres.avif}" class="img-fluid rounded-3 shadow-lg w-100" alt="About Us">
                <div class="position-absolute bottom-0 start-0 bg-white p-4 rounded-3 shadow m-4 d-none d-md-block">
                    <h3 class="fw-bold text-primary m-0">10+</h3>
                    <small class="text-muted fw-bold">Años de experiencia</small>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="seccion1" class="section-padding" style="background-color: #eef2f7;">
    <div class="container">
        <div class="section-title">
            <h4>Nuestro Equipo</h4>
            <h2>Conoce a nuestros Expertos</h2>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="recruitment-box">
                    <i class="fas fa-info-circle fa-2x text-primary me-3"></i>
                    <p class="recruitment-text">
                        ¿Eres veterinario? <strong>Para ser parte de nosotros necesitas crear una cuenta y postularte.</strong>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modalRegistro" class="text-decoration-underline fw-bold ms-1">Empieza aquí</a>
                    </p>
                </div>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(profesionales)}" class="text-center py-5 text-muted">
            <i class="fas fa-user-md fa-4x mb-3 opacity-25"></i>
            <p class="fs-5">Estamos seleccionando a los mejores profesionales para ti.</p>
        </div>

        <div class="row g-4 justify-content-center" th:unless="${#lists.isEmpty(profesionales)}">
            <div class="col-md-6 col-lg-4" th:each="vet : ${profesionales}">
                <div class="vet-card">
                    <div class="vet-header-bg"></div>

                    <div class="vet-avatar-container">
                        <img th:if="${vet.fotoUsuario != null}"
                             th:src="@{'/uploads/' + ${vet.fotoUsuario}}"
                             class="vet-img" th:alt="${vet.nombreUsuario}">

                        <div th:if="${vet.fotoUsuario == null}" class="w-100 h-100 d-flex align-items-center justify-content-center bg-light">
                            <i class="fas fa-user-md vet-icon-default"></i>
                        </div>
                    </div>

                    <div class="vet-body">
                        <div class="vet-specialty" th:text="${vet.especialidad}">Especialidad</div>
                        <h4 class="vet-name" th:text="'Dr. ' + ${vet.nombreUsuario} + ' ' + ${vet.apellidoUsuario}">Nombre</h4>

                        <p class="vet-clinic">
                            <i class="fas fa-clinic-medical me-1"></i> <span th:text="${vet.veterinaria}">Clínica</span>
                        </p>

                        <button type="button" class="btn btn-outline-primary rounded-pill px-4 w-100 fw-bold"
                                data-bs-toggle="modal" data-bs-target="#modalRegistro">
                            Agendar Cita
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<section id="seccion2" class="section-padding bg-white">
    <div class="container">
        <div class="section-title">
            <h4>Testimonios</h4>
            <h2>Pacientes Felices</h2>
        </div>

        <div class="row g-5 align-items-center">
            <div class="col-lg-6">
                <div class="promo-card">
                    <img th:src="@{/Imagenes/mascota2.jpg}" class="img-fluid promo-img" alt="Max y Pipo">
                </div>
            </div>
            <div class="col-lg-6">
                <h3 class="fw-bold mb-3">La historia de Max y Pipo</h3>
                <p class="text-muted mb-4">"Gracias a la plataforma SCM, pude encontrar al especialista perfecto para la alergia de Max. El seguimiento de su dieta fue muy sencillo y ahora están más sanos que nunca."</p>
                <button class="btn btn-primary-gradient shadow-sm" data-bs-toggle="modal" data-bs-target="#modalRegistro">
                    Registra a tu Mascota
                </button>
            </div>
        </div>
    </div>
</section>

<section id="seccion3" class="section-padding" style="background-color: #f0f2f5;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="contact-form">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold text-primary">Contáctanos</h2>
                        <p class="text-muted">¿Tienes alguna duda o sugerencia? Escríbenos.</p>
                    </div>

                    <form th:action="@{/enviar}" method="post">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Nombre</label>
                                <input type="text" class="form-control form-control-lg" name="nombre" required placeholder="Tu nombre">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Correo</label>
                                <input type="email" class="form-control form-control-lg" name="email" required placeholder="tucorreo@email.com">
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-bold">Mensaje</label>
                                <textarea class="form-control form-control-lg" name="mensaje" rows="4" required placeholder="¿En qué podemos ayudarte?"></textarea>
                            </div>
                            <div class="col-12 text-center mt-4">
                                <button type="submit" class="btn btn-primary-gradient w-50 shadow">Enviar Mensaje</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-4">
                <h5 class="text-white mb-3 fw-bold">SCM</h5>
                <p>Tu aliado en el cuidado y gestión veterinaria. Conectamos amor y ciencia.</p>
            </div>
            <div class="col-md-4 mb-4">
                <h5 class="text-white mb-3 fw-bold">Enlaces Rápidos</h5>
                <ul class="list-unstyled">
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#seccion1">Profesionales</a></li>
                    <li><a href="#seccion2">Casos de Éxito</a></li>
                    <li><a href="#modalRegistro" data-bs-toggle="modal">Registrarse</a></li>
                </ul>
            </div>
            <div class="col-md-4 mb-4">
                <h5 class="text-white mb-3 fw-bold">Desarrollado por</h5>
                <p class="mb-1">John Alvarado</p>
                <p class="mb-1">Leonardo Atencio</p>
                <p>Jhoani Gallo</p>
            </div>
        </div>
        <hr class="border-secondary my-4">
        <div class="text-center">
            <small>&copy; 2025 SCM. Todos los derechos reservados.</small>
        </div>
    </div>
</footer>

<div class="modal fade" id="modalRegistro" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg rounded-4">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title fw-bold"><i class="fas fa-user-plus me-2"></i>Crear Cuenta</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>

            <form th:action="@{/usuarios/create}" th:object="${usuarioDTO}" method="post"
                  class="needs-validation" novalidate enctype="multipart/form-data">

                <div class="modal-body p-4">

                    <input type="hidden" name="rolId" value="2">

                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label fw-bold small">Nombre</label>
                            <input type="text" th:field="*{nombre}" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold small">Apellido</label>
                            <input type="text" th:field="*{apellido}" class="form-control" required>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-bold small">Correo Electrónico</label>
                            <input type="email" th:field="*{email}" class="form-control" required>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-bold small">Contraseña</label>
                            <input type="password" th:field="*{contrasena}" class="form-control" required minlength="8">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-bold small">Teléfono</label>
                            <input type="tel" th:field="*{telefono}" class="form-control" required pattern="[0-9]{7,15}">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold small">Fecha Nacimiento</label>
                            <input type="date" th:field="*{fechaNacimiento}" class="form-control" required>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-bold small">Dirección</label>
                            <input type="text" th:field="*{direccion}" class="form-control" required>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-bold small">Foto de Perfil (Opcional)</label>
                            <input type="file" th:field="*{archivoFoto}" class="form-control" accept="image/*">
                        </div>
                    </div>
                </div>

                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-link text-secondary text-decoration-none" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary px-4 fw-bold rounded-pill">Registrarme</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Validación de formulario Bootstrap
    (function () {
        'use strict'
        var forms = document.querySelectorAll('.needs-validation')
        Array.prototype.slice.call(forms).forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
    })()
</script>

</body>
</html>